<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>ESP32 Motor Control</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Mobile Header -->
        <div class="mobile-header">
            <div class="mobile-title">
                <i class="fas fa-cogs"></i>
                <h1>Motor Control</h1>
            </div>
            <div class="mobile-status">
                <span id="global-status-mobile" class="status-badge">IDLE</span>
            </div>
        </div>

        <!-- Desktop Header (hidden on mobile) -->
        <header class="desktop-header">
            <h1><i class="fas fa-cogs"></i> ESP32 Motor Control System</h1>
            <p>Control interface for 4 DC motors and servo</p>
            <div class="status-bar">
                <span><i class="fas fa-wifi"></i> Status: <span id="global-status" class="status-text">CONNECTING</span></span>
                <span><i class="fas fa-network-wired"></i> IP: <span id="ip-address" class="ip-text">---</span></span>
            </div>
        </header>
        
        <div class="dashboard">
            <!-- Motor 0 -->
            <div class="motor-card" data-motor="0">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-motorcycle"></i> Motor 1
                        <span class="pin-label">Pins: 15,14</span>
                    </h3>
                    <span class="status-badge" id="motor0-status">IDLE</span>
                </div>
                <div class="card-body">
                    <div class="position-display">
                        <div class="position-item">
                            <label>Current Position</label>
                            <div class="value" id="motor0-position">0</div>
                            <span class="unit">mm</span>
                        </div>
                        <div class="position-item">
                            <label>Target Position</label>
                            <div class="value" id="motor0-target-display">0</div>
                            <span class="unit">mm</span>
                        </div>
                    </div>
                    
                    <div class="slider-control">
                        <label>Set Target (0-20mm)</label>
                        <div class="slider-wrapper">
                            <input type="range" min="0" max="20" value="0" class="target-slider" 
                                   id="motor0-target" data-motor="0">
                            <div class="slider-values">
                                <span>0</span>
                                <span id="motor0-target-value">0</span>
                                <span>20</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-set" id="motor0-set-button">
                            <i class="fas fa-check"></i> Set Target
                        </button>
                        <button class="btn btn-calibrate" id="motor0-calibrate-button">
                            <i class="fas fa-sync-alt"></i> Calibrate
                        </button>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-full-forward" id="motor0-forward-button">
                            <i class="fas fa-forward"></i> Full Forward
                        </button>
                        <button class="btn btn-full-backward" id="motor0-backward-button">
                            <i class="fas fa-backward"></i> Full Backward
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Motor 1 -->
            <div class="motor-card" data-motor="1">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-motorcycle"></i> Motor 2
                        <span class="pin-label">Pins: 13,12</span>
                    </h3>
                    <span class="status-badge" id="motor1-status">IDLE</span>
                </div>
                <div class="card-body">
                    <div class="position-display">
                        <div class="position-item">
                            <label>Current Position</label>
                            <div class="value" id="motor1-position">0</div>
                            <span class="unit">mm</span>
                        </div>
                        <div class="position-item">
                            <label>Target Position</label>
                            <div class="value" id="motor1-target-display">0</div>
                            <span class="unit">mm</span>
                        </div>
                    </div>
                    
                    <div class="slider-control">
                        <label>Set Target (0-20mm)</label>
                        <div class="slider-wrapper">
                            <input type="range" min="0" max="20" value="0" class="target-slider" 
                                   id="motor1-target" data-motor="1">
                            <div class="slider-values">
                                <span>0</span>
                                <span id="motor1-target-value">0</span>
                                <span>20</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-set" id="motor1-set-button">
                            <i class="fas fa-check"></i> Set Target
                        </button>
                        <button class="btn btn-calibrate" id="motor1-calibrate-button">
                            <i class="fas fa-sync-alt"></i> Calibrate
                        </button>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-full-forward" id="motor1-forward-button">
                            <i class="fas fa-forward"></i> Full Forward
                        </button>
                        <button class="btn btn-full-backward" id="motor1-backward-button">
                            <i class="fas fa-backward"></i> Full Backward
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Motor 2 -->
            <div class="motor-card" data-motor="2">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-motorcycle"></i> Motor 3
                        <span class="pin-label">Pins: 27,26</span>
                    </h3>
                    <span class="status-badge" id="motor2-status">IDLE</span>
                </div>
                <div class="card-body">
                    <div class="position-display">
                        <div class="position-item">
                            <label>Current Position</label>
                            <div class="value" id="motor2-position">0</div>
                            <span class="unit">mm</span>
                        </div>
                        <div class="position-item">
                            <label>Target Position</label>
                            <div class="value" id="motor2-target-display">0</div>
                            <span class="unit">mm</span>
                        </div>
                    </div>
                    
                    <div class="slider-control">
                        <label>Set Target (0-20mm)</label>
                        <div class="slider-wrapper">
                            <input type="range" min="0" max="20" value="0" class="target-slider" 
                                   id="motor2-target" data-motor="2">
                            <div class="slider-values">
                                <span>0</span>
                                <span id="motor2-target-value">0</span>
                                <span>20</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-set" id="motor2-set-button">
                            <i class="fas fa-check"></i> Set Target
                        </button>
                        <button class="btn btn-calibrate" id="motor2-calibrate-button">
                            <i class="fas fa-sync-alt"></i> Calibrate
                        </button>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-full-forward" id="motor2-forward-button">
                            <i class="fas fa-forward"></i> Full Forward
                        </button>
                        <button class="btn btn-full-backward" id="motor2-backward-button">
                            <i class="fas fa-backward"></i> Full Backward
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Motor 3 -->
            <div class="motor-card" data-motor="3">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-motorcycle"></i> Motor 4
                        <span class="pin-label">Pins: 5,23</span>
                    </h3>
                    <span class="status-badge" id="motor3-status">IDLE</span>
                </div>
                <div class="card-body">
                    <div class="position-display">
                        <div class="position-item">
                            <label>Current Position</label>
                            <div class="value" id="motor3-position">0</div>
                            <span class="unit">mm</span>
                        </div>
                        <div class="position-item">
                            <label>Target Position</label>
                            <div class="value" id="motor3-target-display">0</div>
                            <span class="unit">mm</span>
                        </div>
                    </div>
                    
                    <div class="slider-control">
                        <label>Set Target (0-20mm)</label>
                        <div class="slider-wrapper">
                            <input type="range" min="0" max="20" value="0" class="target-slider" 
                                   id="motor3-target" data-motor="3">
                            <div class="slider-values">
                                <span>0</span>
                                <span id="motor3-target-value">0</span>
                                <span>20</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-set" id="motor3-set-button">
                            <i class="fas fa-check"></i> Set Target
                        </button>
                        <button class="btn btn-calibrate" id="motor3-calibrate-button">
                            <i class="fas fa-sync-alt"></i> Calibrate
                        </button>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-full-forward" id="motor3-forward-button">
                            <i class="fas fa-forward"></i> Full Forward
                        </button>
                        <button class="btn btn-full-backward" id="motor3-backward-button">
                            <i class="fas fa-backward"></i> Full Backward
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Group Control Card -->
            <div class="group-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-layer-group"></i> Group Control
                    </h3>
                </div>
                <div class="card-body">
                    <div class="slider-control">
                        <label>Set Target for All Motors</label>
                        <div class="slider-wrapper">
                            <input type="range" min="0" max="20" value="0" class="target-slider" id="all-motors-target">
                            <div class="slider-values">
                                <span>0</span>
                                <span id="all-motors-target-value">0</span>
                                <span>20</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-grid">
                        <button class="btn btn-group-set" id="all-motors-set-button">
                            <i class="fas fa-check-double"></i> Set All
                        </button>
                        <button class="btn btn-group-calibrate" id="all-motors-calibrate-button">
                            <i class="fas fa-sync-alt"></i> Calibrate All
                        </button>
                        <button class="btn btn-group-forward" id="all-full-forward-button">
                            <i class="fas fa-fast-forward"></i> All Forward
                        </button>
                        <button class="btn btn-group-backward" id="all-full-backward-button">
                            <i class="fas fa-fast-backward"></i> All Backward
                        </button>
                    </div>
                    
                    <button class="btn btn-emergency" id="emergency-stop-button">
                        <i class="fas fa-exclamation-triangle"></i> Emergency Stop
                    </button>
                </div>
            </div>
            
            <!-- Servo Control Card -->
            <div class="servo-card">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-cogs"></i> Servo Control
                        <span class="pin-label">Pins: 18,19</span>
                    </h3>
                    <span class="status-badge" id="servo-status">OFF</span>
                </div>
                <div class="card-body">
                    <div class="servo-control">
                        <div class="toggle-switch">
                            <input type="checkbox" id="servo-toggle">
                            <label for="servo-toggle" class="toggle-label">
                                <span class="toggle-handle"></span>
                            </label>
                        </div>
                        <div class="servo-info">
                            <p>Servo State: <strong id="servo-state">OFF</strong></p>
                            <p class="hint">Controls pins 18 & 19 simultaneously</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Info Card (Hidden on mobile) -->
            <div class="info-card desktop-only">
                <div class="card-header">
                    <h3 class="card-title">
                        <i class="fas fa-info-circle"></i> System Information
                    </h3>
                </div>
                <div class="card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <i class="fas fa-microchip"></i>
                            <div>
                                <strong>Processor</strong>
                                <p>ESP32 Dual Core</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-sliders-h"></i>
                            <div>
                                <strong>Movement Range</strong>
                                <p>0-20 mm per motor</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-tachometer-alt"></i>
                            <div>
                                <strong>Speed</strong>
                                <p>~1 mm per 6.8s</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-plug"></i>
                            <div>
                                <strong>Connection</strong>
                                <p>WebSocket Real-time</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Connection Status -->
        <div class="mobile-footer">
            <div class="connection-status">
                <i class="fas fa-signal" id="connection-icon"></i>
                <span id="connection-status-text">Connecting...</span>
            </div>
            <div class="ip-display">
                <span id="ip-mobile">IP: ---</span>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="fas fa-info-circle toast-icon"></i>
            <span class="toast-message" id="toast-message">Notification</span>
        </div>
    </div>

    <script src="/script.js"></script>
</body>
</html>